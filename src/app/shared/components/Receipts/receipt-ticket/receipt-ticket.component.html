<div class="receipt-container mx-auto" *ngIf="header && body" [ngClass]="className">
    
    <div *ngIf="watermark" class="watermark-overlay">
        <div class="watermark-text">{{ watermark }}</div>
    </div>

    
    <div class="text-center mb-2">
        <div class="fw-bold receipt-title text-uppercase">{{ header.companyLegalName }}</div>
        <div class="small">RUC: {{ header.companyRUC }}</div>
        <div class="small text-muted">{{ header.companyAddress }}</div>
    </div>

    
    <div class="text-center fw-bold mb-2">
        <div class="small">{{ header.documentType }}</div>
        <div class="fs-6">{{ header.seriesAndNumber }}</div>
    </div>

    <div class="receipt-separator mb-2 border-top border-dark border-1 opacity-25"></div>

    
    <div class="small mb-2">
        <div class="d-flex justify-content-between">
            <span class="text-muted">Fecha:</span>
            <span>{{ formatDate(header.issueDate) }}</span>
        </div>
        <div><span class="text-muted">Cliente:</span> {{ body.clientName }}</div>
        <div><span class="text-muted">Doc:</span> {{ body.clientDocumentNumber }}</div>
        <div><span class="text-muted">Pago:</span> {{ body.paymentMethod }}</div>
    </div>

    <div class="receipt-separator mb-2 border-top border-dark border-1 opacity-25"></div>

    
    <div class="items-table small">
        <div class="d-flex fw-bold mb-1 border-bottom border-dark border-1 pb-1">
            <span class="flex-grow-1">DESC</span>
            <span class="text-center px-1" style="width: 30px;">CANT</span>
            <span class="text-end" style="width: 60px;">TOTAL</span>
        </div>
        <div *ngFor="let item of body.displayItems" class="d-flex mb-1">
            <span class="flex-grow-1">{{ item.description }}</span>
            <span class="text-center px-1" style="width: 30px;">{{ item.quantity }}</span>
            <span class="text-end" style="width: 60px;">{{ formatCurrency(item.totalAmount) }}</span>
        </div>
    </div>

    <div class="receipt-separator my-2 border-top border-dark border-1 opacity-25"></div>

    
    <div class="totals-section small">
        <div class="d-flex justify-content-between" *ngIf="body.opGravadas > 0">
            <span>OP. GRAVADAS:</span>
            <span>{{ formatCurrency(body.opGravadas) }}</span>
        </div>
        <div class="d-flex justify-content-between" *ngIf="body.igv > 0">
            <span>I.G.V:</span>
            <span>{{ formatCurrency(body.igv) }}</span>
        </div>
        <div class="d-flex justify-content-between fw-bold pt-1">
            <span class="fs-6">TOTAL:</span>
            <span class="fs-6">{{ formatCurrency(body.total) }}</span>
        </div>
    </div>

    <div class="mt-2 small fw-bold text-center text-uppercase">
        Son: {{ body.totalInWords }}
    </div>

    <div class="receipt-separator my-2 border-top border-dark border-1 opacity-25"></div>

    
    <div class="text-center receipt-footer small text-muted">
        <div *ngIf="body.footerNote" class="mb-2 italic">{{ body.footerNote }}</div>
        <div class="fw-bold">Gracias por su compra</div>
        <div class="mt-1 x-small">{{ body.cpeUrl }}</div>
    </div>
</div>