<div class="receipt-container mx-auto" *ngIf="header && body" [ngClass]="className">
    
    <div *ngIf="watermark" class="watermark-overlay">
        <div class="watermark-text">{{ watermark }}</div>
    </div>

    
    <div class="text-center mb-3">
        <div class="fw-bold fs-5 text-uppercase mb-1">{{ header.companyLegalName }}</div>
        <div class="small fw-semibold">RUC: {{ header.companyRUC }}</div>
        <div class="small text-muted px-2">{{ header.companyAddress }}</div>
        <div class="small mt-1 fst-italic">{{ header.companyEmail }} | {{ header.companyWebsite }}</div>
    </div>

    
    <div class="document-header text-center my-3 py-2 border-top border-bottom">
        <div class="fw-bold text-uppercase">{{ header.documentType }}</div>
        <div class="fw-bold fs-5">{{ header.seriesAndNumber }}</div>
    </div>

    
    <div class="info-grid small mb-3">
        <div class="row g-1">
            <div class="col-4 text-muted">Fecha Emisión:</div>
            <div class="col-8 fw-semibold text-end">{{ formatDate(header.issueDate) }}</div>

            <div class="col-4 text-muted">Cliente:</div>
            <div class="col-8 text-end">{{ body.clientName }}</div>

            <div class="col-4 text-muted">RUC/DNI:</div>
            <div class="col-8 text-end">{{ body.clientDocumentNumber }}</div>

            <div class="col-4 text-muted">Met. Pago:</div>
            <div class="col-8 text-end">{{ body.paymentMethod }}</div>
        </div>
    </div>

    
    <div class="items-table mb-3">
        <table class="w-100 small">
            <thead class="border-bottom-2">
                <tr class="fw-bold">
                    <th class="py-2">DESCRIPCIÓN</th>
                    <th class="text-center py-2">CANT</th>
                    <th class="text-end py-2">TOTAL</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of body.displayItems" class="border-bottom-1">
                    <td class="py-2 align-top">{{ item.description }}</td>
                    <td class="text-center py-2 align-top">{{ item.quantity }}</td>
                    <td class="text-end py-2 align-top">{{ formatCurrency(item.totalAmount) }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    
    <div class="totals-grid small mb-3">
        <div class="row g-1 justify-content-end">
            <div class="col-7 text-end text-muted">OP. GRAVADAS:</div>
            <div class="col-5 text-end">{{ formatCurrency(body.opGravadas) }}</div>

            <div class="col-7 text-end text-muted">I.G.V (18%):</div>
            <div class="col-5 text-end">{{ formatCurrency(body.igv) }}</div>

            <div class="col-12 my-1 border-top border-dotted"></div>

            <div class="col-7 text-end fw-bold fs-5">TOTAL:</div>
            <div class="col-5 text-end fw-bold fs-5">S/ {{ formatCurrency(body.total) }}</div>
        </div>
    </div>

    
    <div class="amount-words small fw-bold text-uppercase mb-3 px-2 py-1 bg-light text-center rounded">
        Son: {{ body.totalInWords }}
    </div>

    
    <div class="footer-section text-center">
        <div *ngIf="qrSrc" class="qr-container mb-3 mx-auto">
            <img [src]="qrSrc" alt="QR Code" class="img-fluid" style="width: 100px;">
        </div>

        <div class="footer-notes small text-muted">
            <div *ngIf="body.footerNote" class="mb-2">{{ body.footerNote }}</div>
            <div class="fw-bold text-dark">Representación impresa del Comprobante de Pago Electrónico</div>
            <div class="mt-1">Consulte en: <span class="text-primary">{{ body.cpeUrl }}</span></div>
        </div>
    </div>
</div>