<div class="auth-container">
    <div class="auth-wrapper">
        <p-card [style]="{ width: '100%', maxWidth: '500px' }" class="auth-card shadow-2">
            <div class="auth-header">
                <div class="logo-circle">
                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor"
                        viewBox="0 0 16 16" aria-hidden="true" focusable="false">
                        <path
                            d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z" />
                        <path fill-rule="evenodd"
                            d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5" />
                    </svg>
                </div>
                <h2 class="auth-title">Crear Cuenta</h2>
                <p class="auth-subtitle">Regístrate en el sistema</p>
            </div>

            <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="auth-form" novalidate>

                <!-- Usuario -->
                <div class="field">
                    <p-floatlabel>
                        <input id="username" pInputText formControlName="username" class="w-full"
                            [class.ng-invalid]="username?.invalid && (username?.touched || username?.dirty)" />
                        <label for="username">Usuario</label>
                    </p-floatlabel>
                    <small class="error-message" *ngIf="username?.invalid && (username?.touched || username?.dirty)">
                        <span *ngIf="username?.errors?.['required']">El usuario es requerido.</span>
                        <span *ngIf="username?.errors?.['minlength']">El usuario debe tener al menos 3
                            caracteres.</span>
                    </small>
                </div>

                <!-- Nombre completo -->
                <div class="field">
                    <p-floatlabel>
                        <input id="nombre" pInputText formControlName="nombre" class="w-full"
                            [class.ng-invalid]="nombre?.invalid && (nombre?.touched || username?.dirty)" />
                        <label for="nombre">Nombre Completo</label>
                    </p-floatlabel>
                    <small class="error-message" *ngIf="nombre?.invalid && (nombre?.touched || username?.dirty)">
                        <span *ngIf="nombre?.errors?.['required']">El nombre es requerido.</span>
                    </small>
                </div>

                <!-- Email -->
                <div class="field">
                    <p-floatlabel>
                        <input id="email" pInputText type="email" formControlName="email" class="w-full"
                            [class.ng-invalid]="email?.invalid && (email?.touched || email?.dirty)" />
                        <label for="email">Correo Electrónico</label>
                    </p-floatlabel>
                    <small class="error-message" *ngIf="email?.invalid && (email?.touched || email?.dirty)">
                        <span *ngIf="email?.errors?.['required']">El correo es requerido.</span>
                        <span *ngIf="email?.errors?.['email']">Ingresa un correo válido.</span>
                    </small>
                </div>

                <!-- Contraseña -->
                <div class="field">
                    <p-floatlabel>
                        <p-password id="password" formControlName="password" [toggleMask]="true" [feedback]="false"
                            styleClass="w-full" inputStyleClass="w-full"
                            [class.ng-invalid]="password?.invalid && (password?.touched || password?.dirty)">
                        </p-password>
                        <label for="password">Contraseña</label>
                    </p-floatlabel>
                    <small class="error-message" *ngIf="password?.invalid && (password?.touched || password?.dirty)">
                        <span *ngIf="password?.errors?.['required']">La contraseña es requerida.</span>
                        <span *ngIf="password?.errors?.['minlength']">La contraseña debe tener al menos 4
                            caracteres.</span>
                    </small>
                </div>


                <!-- Mensaje de error global -->
                <p-message *ngIf="errorMessage()" severity="error" [text]="errorMessage()"
                    styleClass="w-full mb-3"></p-message>

                <!-- Botón submit -->
                <div class="d-flex justify-content-center mt-2">
                    <p-button type="submit" label="Registrarse" icon="pi pi-user-plus" [loading]="isLoading()"
                        [disabled]="registerForm.invalid || isLoading()" styleClass="p-button-lg"></p-button>
                </div>

                <div class="auth-footer mt-3">
                    <span>¿Ya tienes cuenta? </span>
                    <a routerLink="/login" class="link">Inicia sesión aquí</a>
                </div>

            </form>
        </p-card>
    </div>
</div>