<div class="container-fluid min-vh-100 d-flex align-items-center justify-content-center bg-light p-3">
  <div class="card shadow rounded-3 w-100" style="max-width: 450px;">
    <div class="card-body p-4">

      <div class="text-center mb-4">
        <div class="d-inline-flex align-items-center justify-content-center bg-primary text-white rounded-circle mb-3"
          style="width: 80px; height: 80px;">
          <!-- icono SVG (Bootstrap icon) -->
          <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-capsule"
            viewBox="0 0 16 16" aria-hidden="true" focusable="false">
            <path
              d="M1.828 8.9 8.9 1.827a4 4 0 1 1 5.657 5.657l-7.07 7.071A4 4 0 1 1 1.827 8.9m9.128.771 2.893-2.893a3 3 0 1 0-4.243-4.242L6.713 5.429z" />
          </svg>
        </div>

        <h2 class="h5 fw-bold text-dark mb-1">Sistema de Farmacia</h2>
        <p class="text-muted mb-0">Ingresa a tu cuenta</p>
      </div>

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>

        <div class="mb-3">
          <label for="usernameOrEmail" class="form-label fw-semibold">Usuario o Email</label>
          <input type="text" id="usernameOrEmail" class="form-control form-control-lg" formControlName="usernameOrEmail"
            placeholder="Ingresa tu usuario o email"
            [class.is-invalid]="usernameOrEmail?.invalid && (usernameOrEmail?.touched || usernameOrEmail?.dirty)"
            aria-describedby="usernameHelp" />
          <div class="invalid-feedback"
            *ngIf="usernameOrEmail?.invalid && (usernameOrEmail?.touched || usernameOrEmail?.dirty)">
            <div *ngIf="usernameOrEmail?.errors?.['required']">El usuario o email es requerido.</div>
            <div *ngIf="usernameOrEmail?.errors?.['email']">Formato de email inválido.</div>
          </div>
        </div>

        <div class="mb-3">
          <label for="password" class="form-label fw-semibold">Contraseña</label>
          <input type="password" id="password" class="form-control form-control-lg" formControlName="password"
            placeholder="Ingresa tu contraseña"
            [class.is-invalid]="password?.invalid && (password?.touched || password?.dirty)" />
          <div class="invalid-feedback" *ngIf="password?.invalid && (password?.touched || password?.dirty)">
            <div *ngIf="password?.errors?.['required']">La contraseña es requerida.</div>
            <div *ngIf="password?.errors?.['minlength']">La contraseña debe tener al menos 4 caracteres.</div>
          </div>
        </div>

        <div *ngIf="errorMessage()" class="alert alert-danger" role="alert" aria-live="polite">
          <i class="bi bi-exclamation-circle me-2" aria-hidden="true"></i>
          {{ errorMessage() }}
        </div>

        <button type="submit" class="btn btn-primary btn-lg w-100 mb-3" [disabled]="isLoading() || loginForm.invalid">
          <ng-container *ngIf="!isLoading()">Iniciar Sesión</ng-container>
          <ng-container *ngIf="isLoading()">
            <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            Iniciando sesión...
          </ng-container>
        </button>

        <div class="text-center">
          <p class="mb-0 text-muted small">
            ¿No tienes cuenta?
            <a routerLink="/register" class="text-decoration-none fw-semibold">Regístrate aquí</a>
          </p>
        </div>

      </form>
    </div>
  </div>
</div>